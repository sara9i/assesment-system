{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport OrderContext from \"./Context\";\nvar EMPTY_LIST = [];\n/**\n * Will add `div` to document. Nest call will keep order\n * @param render Render DOM in document\n */\n\nexport default function useDom(render, debug) {\n  var _React$useState = React.useState(function () {\n    if (!canUseDom()) {\n      return null;\n    }\n\n    var defaultEle = document.createElement('div');\n\n    if (process.env.NODE_ENV !== 'production' && debug) {\n      defaultEle.setAttribute('data-debug', debug);\n    }\n\n    return defaultEle;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      ele = _React$useState2[0]; // ========================== Order ==========================\n\n\n  var appendedRef = React.useRef(false);\n  var queueCreate = React.useContext(OrderContext);\n\n  var _React$useState3 = React.useState(EMPTY_LIST),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      queue = _React$useState4[0],\n      setQueue = _React$useState4[1];\n\n  var mergedQueueCreate = queueCreate || (appendedRef.current ? undefined : function (appendFn) {\n    setQueue(function (origin) {\n      var newQueue = [appendFn].concat(_toConsumableArray(origin));\n      return newQueue;\n    });\n  }); // =========================== DOM ===========================\n\n  function append() {\n    if (!ele.parentElement) {\n      document.body.appendChild(ele);\n    }\n\n    appendedRef.current = true;\n  }\n\n  function cleanup() {\n    var _ele$parentElement;\n\n    (_ele$parentElement = ele.parentElement) === null || _ele$parentElement === void 0 ? void 0 : _ele$parentElement.removeChild(ele);\n    appendedRef.current = false;\n  }\n\n  useLayoutEffect(function () {\n    if (render) {\n      if (queueCreate) {\n        queueCreate(append);\n      } else {\n        append();\n      }\n    } else {\n      cleanup();\n    }\n\n    return cleanup;\n  }, [render]);\n  useLayoutEffect(function () {\n    if (queue.length) {\n      queue.forEach(function (appendFn) {\n        return appendFn();\n      });\n      setQueue(EMPTY_LIST);\n    }\n  }, [queue]);\n  return [ele, mergedQueueCreate];\n}","map":{"version":3,"sources":["/Users/sara/Documents/personal-projects/metaschool/frontend/node_modules/@rc-component/portal/es/useDom.js"],"names":["_toConsumableArray","_slicedToArray","React","useLayoutEffect","canUseDom","OrderContext","EMPTY_LIST","useDom","render","debug","_React$useState","useState","defaultEle","document","createElement","process","env","NODE_ENV","setAttribute","_React$useState2","ele","appendedRef","useRef","queueCreate","useContext","_React$useState3","_React$useState4","queue","setQueue","mergedQueueCreate","current","undefined","appendFn","origin","newQueue","concat","append","parentElement","body","appendChild","cleanup","_ele$parentElement","removeChild","length","forEach"],"mappings":"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","sourcesContent":["import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport canUseDom from \"rc-util/es/Dom/canUseDom\";\nimport OrderContext from \"./Context\";\nvar EMPTY_LIST = [];\n/**\n * Will add `div` to document. Nest call will keep order\n * @param render Render DOM in document\n */\n\nexport default function useDom(render, debug) {\n  var _React$useState = React.useState(function () {\n    if (!canUseDom()) {\n      return null;\n    }\n\n    var defaultEle = document.createElement('div');\n\n    if (process.env.NODE_ENV !== 'production' && debug) {\n      defaultEle.setAttribute('data-debug', debug);\n    }\n\n    return defaultEle;\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 1),\n      ele = _React$useState2[0]; // ========================== Order ==========================\n\n\n  var appendedRef = React.useRef(false);\n  var queueCreate = React.useContext(OrderContext);\n\n  var _React$useState3 = React.useState(EMPTY_LIST),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      queue = _React$useState4[0],\n      setQueue = _React$useState4[1];\n\n  var mergedQueueCreate = queueCreate || (appendedRef.current ? undefined : function (appendFn) {\n    setQueue(function (origin) {\n      var newQueue = [appendFn].concat(_toConsumableArray(origin));\n      return newQueue;\n    });\n  }); // =========================== DOM ===========================\n\n  function append() {\n    if (!ele.parentElement) {\n      document.body.appendChild(ele);\n    }\n\n    appendedRef.current = true;\n  }\n\n  function cleanup() {\n    var _ele$parentElement;\n\n    (_ele$parentElement = ele.parentElement) === null || _ele$parentElement === void 0 ? void 0 : _ele$parentElement.removeChild(ele);\n    appendedRef.current = false;\n  }\n\n  useLayoutEffect(function () {\n    if (render) {\n      if (queueCreate) {\n        queueCreate(append);\n      } else {\n        append();\n      }\n    } else {\n      cleanup();\n    }\n\n    return cleanup;\n  }, [render]);\n  useLayoutEffect(function () {\n    if (queue.length) {\n      queue.forEach(function (appendFn) {\n        return appendFn();\n      });\n      setQueue(EMPTY_LIST);\n    }\n  }, [queue]);\n  return [ele, mergedQueueCreate];\n}"]},"metadata":{},"sourceType":"module"}