{"ast":null,"code":"var _jsxFileName = \"/Users/sara/Documents/personal-projects/metaschool/frontend/src/components/Home/Home.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Layout } from 'antd';\nimport SideBar from '../SideBar/SideBar';\nimport Header from '../Header/Header';\nimport { AdminRouter } from '../../routes';\nimport AuthStore, { isUserLoggedIn } from '../../stores/authStore';\nimport configStore from '../../stores/configureStore';\nimport { Provider } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { defaultNavItems, navItemMap } from './constant';\nconst {\n  Content\n} = Layout;\nconst store = configStore();\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const [navItems, setNavItems] = useState(defaultNavItems);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [isTrainer, setIsTrainer] = useState(false);\n  const [layoutStyle, setLayoutStyle] = useState({\n    padding: '0 24px 24px'\n  });\n  const [mainContentLayout, setMainContentLayout] = useState({\n    padding: 24,\n    margin: 0,\n    minHeight: '100vh',\n    backgroundColor: 'white'\n  });\n  useEffect(() => {\n    let authObject = window.localStorage.getItem('auth');\n\n    if (authObject) {\n      try {\n        authObject = JSON.parse(authObject);\n\n        if (authObject.user && authObject.accessToken && authObject.refreshToken) {\n          var _authObject;\n\n          AuthStore.dispatch({\n            type: 'AUTH/LOG_IN',\n            payload: authObject\n          });\n          const user = (_authObject = authObject) === null || _authObject === void 0 ? void 0 : _authObject.user;\n          const tabs = user === null || user === void 0 ? void 0 : user.tabsVisible; // IS THIS USED BY SOMETHING\n\n          if (tabs) {\n            // IS THIS USED BY SOMETHING\n            setNavItems(tabs.map(tab => navItemMap[tab]));\n          } else {\n            setNavItems(defaultNavItems);\n          }\n\n          if (user.isTrainer) {\n            setIsTrainer(true);\n          }\n        }\n      } catch (error) {\n        console.log('[Home] Error parsing the JSON Object:', error);\n        window.localStorage.removeItem('auth');\n      }\n    }\n  }, [location]);\n  const pathname = (location === null || location === void 0 ? void 0 : location.pathname) || '';\n  const isLoginRoute = pathname.startsWith('/login');\n  const isCreatorDashboardRoute = pathname === '/creator';\n  useEffect(() => {\n    function handleLogout() {\n      console.log('User Logged Out');\n      history.push('/');\n    }\n\n    const unsubscribe = AuthStore.subscribe(() => {\n      if (!isUserLoggedIn(AuthStore.getState())) {\n        handleLogout();\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [history]);\n  useEffect(() => {\n    if (isCreatorDashboardRoute) {\n      setLayoutStyle({\n        padding: '0 0'\n      });\n      setMainContentLayout({\n        padding: '24px 0 24px 48px',\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: '#F0F2F5'\n      });\n    } else if (isLoginRoute) {\n      setLayoutStyle({\n        padding: '0 0'\n      });\n      setMainContentLayout({\n        padding: 0,\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: 'white'\n      });\n    } else {\n      setLayoutStyle({\n        padding: '0 24px 24px'\n      });\n      setMainContentLayout({\n        padding: 24,\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: 'white'\n      });\n    }\n  }, [location]);\n  const showTabs = isUserLoggedIn(AuthStore.getState());\n  return /*#__PURE__*/React.createElement(Provider, {\n    store: store,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, !isLoginRoute && /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, showTabs && /*#__PURE__*/React.createElement(SideBar, {\n    navItems: navItems,\n    isCollapsed: isCollapsed,\n    setIsCollapsed: () => setIsCollapsed(!isCollapsed),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Layout, {\n    style: layoutStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Content, {\n    style: mainContentLayout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AdminRouter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/sara/Documents/personal-projects/metaschool/frontend/src/components/Home/Home.js"],"names":["React","useEffect","useState","Layout","SideBar","Header","AdminRouter","AuthStore","isUserLoggedIn","configStore","Provider","useHistory","useLocation","defaultNavItems","navItemMap","Content","store","App","history","location","navItems","setNavItems","isCollapsed","setIsCollapsed","isTrainer","setIsTrainer","layoutStyle","setLayoutStyle","padding","mainContentLayout","setMainContentLayout","margin","minHeight","backgroundColor","authObject","window","localStorage","getItem","JSON","parse","user","accessToken","refreshToken","dispatch","type","payload","tabs","tabsVisible","map","tab","error","console","log","removeItem","pathname","isLoginRoute","startsWith","isCreatorDashboardRoute","handleLogout","push","unsubscribe","subscribe","getState","showTabs"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Layout } from 'antd';\nimport SideBar from '../SideBar/SideBar';\nimport Header from '../Header/Header';\nimport { AdminRouter } from '../../routes';\nimport AuthStore, { isUserLoggedIn } from '../../stores/authStore';\nimport configStore from '../../stores/configureStore';\nimport { Provider } from 'react-redux';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { defaultNavItems, navItemMap } from './constant';\n\nconst { Content } = Layout;\n\nconst store = configStore();\n\nconst App = () => {\n  const history = useHistory();\n  const location = useLocation();\n  const [navItems, setNavItems] = useState(defaultNavItems);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [isTrainer, setIsTrainer] = useState(false);\n  const [layoutStyle, setLayoutStyle] = useState({\n    padding: '0 24px 24px'\n  });\n  const [mainContentLayout, setMainContentLayout] = useState({\n    padding: 24,\n    margin: 0,\n    minHeight: '100vh',\n    backgroundColor: 'white'\n  });\n\n  useEffect(() => {\n    let authObject = window.localStorage.getItem('auth');\n    if (authObject) {\n      try {\n        authObject = JSON.parse(authObject);\n        if (\n          authObject.user &&\n          authObject.accessToken &&\n          authObject.refreshToken\n        ) {\n          AuthStore.dispatch({ type: 'AUTH/LOG_IN', payload: authObject });\n          const user = authObject?.user;\n          const tabs = user?.tabsVisible; // IS THIS USED BY SOMETHING\n          if (tabs) {\n            // IS THIS USED BY SOMETHING\n            setNavItems(tabs.map((tab) => navItemMap[tab]));\n          } else {\n            setNavItems(defaultNavItems);\n          }\n          if (user.isTrainer) {\n            setIsTrainer(true);\n          }\n        }\n      } catch (error) {\n        console.log('[Home] Error parsing the JSON Object:', error);\n        window.localStorage.removeItem('auth');\n      }\n    }\n  }, [location]);\n\n  const pathname = location?.pathname || '';\n\n  const isLoginRoute = pathname.startsWith('/login');\n  const isCreatorDashboardRoute = pathname === '/creator';\n\n  useEffect(() => {\n    function handleLogout() {\n      console.log('User Logged Out');\n      history.push('/');\n    }\n    const unsubscribe = AuthStore.subscribe(() => {\n      if (!isUserLoggedIn(AuthStore.getState())) {\n        handleLogout();\n      }\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [history]);\n\n  useEffect(() => {\n    if (isCreatorDashboardRoute) {\n      setLayoutStyle({ padding: '0 0' });\n      setMainContentLayout({\n        padding: '24px 0 24px 48px',\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: '#F0F2F5'\n      });\n    } else if (isLoginRoute) {\n      setLayoutStyle({ padding: '0 0' });\n      setMainContentLayout({\n        padding: 0,\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: 'white'\n      });\n    } else {\n      setLayoutStyle({ padding: '0 24px 24px' });\n      setMainContentLayout({\n        padding: 24,\n        margin: 0,\n        minHeight: '100vh',\n        backgroundColor: 'white'\n      });\n    }\n  }, [location]);\n\n  const showTabs = isUserLoggedIn(AuthStore.getState());\n\n  return (\n    <Provider store={store}>\n      <Layout>\n        {!isLoginRoute && <Header />}\n        <Layout>\n          {showTabs && (\n            <SideBar\n              navItems={navItems}\n              isCollapsed={isCollapsed}\n              setIsCollapsed={() => setIsCollapsed(!isCollapsed)}\n            />\n          )}\n          <Layout style={layoutStyle}>\n            <Content style={mainContentLayout}>\n              <AdminRouter />\n            </Content>\n          </Layout>\n        </Layout>\n      </Layout>\n    </Provider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}