{"ast":null,"code":"var _jsxFileName = \"/Users/sara/Documents/personal-projects/metaschool/frontend/src/components/Login/Login.js\";\nimport { Button, Form, Input, Row } from \"antd\";\nimport Axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport AuthStore, { isUserLoggedIn } from \"../../stores/authStore\";\nimport { checkAndReturnAuthObject } from \"../../utilities/validator\";\nimport Card from \"../Card\";\nimport Image from \"../Image\";\nimport { loginBackground, login_logo } from \"./constant\";\nimport \"./Login.scss\";\nconst className = \"c-Login\";\n\nconst Login = props => {\n  let [form] = Form.useForm();\n  useEffect(() => {\n    function handleLoggedInStatusChange(status) {\n      props.history.push(\"/\");\n    }\n\n    const unsubscribe = AuthStore.subscribe(() => {\n      handleLoggedInStatusChange(isUserLoggedIn(checkAndReturnAuthObject()));\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [props.history]);\n\n  const loginUser = async (email, password) => {\n    let LoginURL = `${process.env.REACT_APP_BACKEND_URL}/auth/login`;\n\n    try {\n      let response = await Axios.post(LoginURL, {\n        email: email,\n        password: password\n      });\n      return response.data;\n    } catch (error) {\n      throw error.response;\n    }\n  };\n\n  const onFinish = async values => {\n    try {\n      let response = await loginUser(values.email, values.password);\n      AuthStore.dispatch({\n        type: \"AUTH/LOG_IN\",\n        payload: response\n      });\n      const user = response === null || response === void 0 ? void 0 : response.user;\n      const tabs = user === null || user === void 0 ? void 0 : user.tabsVisible;\n\n      if (tabs) {\n        if ((tabs === null || tabs === void 0 ? void 0 : tabs.length) > 1) {\n          props.history.push(\"/\");\n        } else {\n          props.history.push(`/${tabs[0]}`);\n        }\n      } else {\n        props.history.push(\"/\");\n      }\n    } catch (error) {\n      var _error$data;\n\n      alert(\"Error logging in: \" + (error === null || error === void 0 ? void 0 : (_error$data = error.data) === null || _error$data === void 0 ? void 0 : _error$data.message));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: className,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${className}__container`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${className}__background__wrapper`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Image, Object.assign({}, loginBackground, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${className}__logo__wrapper`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Image, Object.assign({}, login_logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${className}__subtext`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"Join the web3 rocketship\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${className}__form__wrapper`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    form: form,\n    name: \"Login\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Email\",\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: \"Please input your email!\"\n    }, {\n      type: \"email\",\n      message: \"Please enter a valid email\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    placeholder: \"Email\",\n    className: `${className}__email__input`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your password!\"\n    }, {\n      type: \"string\",\n      pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/,\n      message: \"Password should be atleast 8 characters with atleast 1 uppercase, 1 lowercase and 1 numeric character\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Input.Password, {\n    placeholder: \"Password\",\n    className: `${className}__password__input`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    shouldUpdate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, () => /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    disabled: !form.isFieldsTouched(true) || form.getFieldsError().filter((_ref) => {\n      let {\n        errors\n      } = _ref;\n      return errors.length;\n    }).length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }, \"Log in\"))))))));\n};\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/sara/Documents/personal-projects/metaschool/frontend/src/components/Login/Login.js"],"names":["Button","Form","Input","Row","Axios","React","useEffect","withRouter","AuthStore","isUserLoggedIn","checkAndReturnAuthObject","Card","Image","loginBackground","login_logo","className","Login","props","form","useForm","handleLoggedInStatusChange","status","history","push","unsubscribe","subscribe","loginUser","email","password","LoginURL","process","env","REACT_APP_BACKEND_URL","response","post","data","error","onFinish","values","dispatch","type","payload","user","tabs","tabsVisible","length","alert","message","remember","required","pattern","isFieldsTouched","getFieldsError","filter","errors"],"mappings":";AAAA,SAASA,MAAT,EAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,GAA9B,QAAyC,MAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,SAAP,IAAoBC,cAApB,QAA0C,wBAA1C;AACA,SAASC,wBAAT,QAAyC,2BAAzC;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,eAAT,EAA0BC,UAA1B,QAA4C,YAA5C;AACA,OAAO,cAAP;AAEA,MAAMC,SAAS,GAAG,SAAlB;;AAEA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AACvB,MAAI,CAACC,IAAD,IAASjB,IAAI,CAACkB,OAAL,EAAb;AAEAb,EAAAA,SAAS,CAAC,MAAM;AACd,aAASc,0BAAT,CAAoCC,MAApC,EAA4C;AAC1CJ,MAAAA,KAAK,CAACK,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;;AACD,UAAMC,WAAW,GAAGhB,SAAS,CAACiB,SAAV,CAAoB,MAAM;AAC5CL,MAAAA,0BAA0B,CAACX,cAAc,CAACC,wBAAwB,EAAzB,CAAf,CAA1B;AACD,KAFmB,CAApB;AAGA,WAAO,MAAM;AACXc,MAAAA,WAAW;AACZ,KAFD;AAGD,GAVQ,EAUN,CAACP,KAAK,CAACK,OAAP,CAVM,CAAT;;AAYA,QAAMI,SAAS,GAAG,OAAOC,KAAP,EAAcC,QAAd,KAA2B;AAC3C,QAAIC,QAAQ,GAAI,GAAEC,OAAO,CAACC,GAAR,CAAYC,qBAAsB,aAApD;;AACA,QAAI;AACF,UAAIC,QAAQ,GAAG,MAAM7B,KAAK,CAAC8B,IAAN,CAAWL,QAAX,EAAqB;AACxCF,QAAAA,KAAK,EAAEA,KADiC;AAExCC,QAAAA,QAAQ,EAAEA;AAF8B,OAArB,CAArB;AAIA,aAAOK,QAAQ,CAACE,IAAhB;AACD,KAND,CAME,OAAOC,KAAP,EAAc;AACd,YAAMA,KAAK,CAACH,QAAZ;AACD;AACF,GAXD;;AAaA,QAAMI,QAAQ,GAAG,MAAOC,MAAP,IAAkB;AACjC,QAAI;AACF,UAAIL,QAAQ,GAAG,MAAMP,SAAS,CAACY,MAAM,CAACX,KAAR,EAAeW,MAAM,CAACV,QAAtB,CAA9B;AACApB,MAAAA,SAAS,CAAC+B,QAAV,CAAmB;AAAEC,QAAAA,IAAI,EAAE,aAAR;AAAuBC,QAAAA,OAAO,EAAER;AAAhC,OAAnB;AACA,YAAMS,IAAI,GAAGT,QAAH,aAAGA,QAAH,uBAAGA,QAAQ,CAAES,IAAvB;AACA,YAAMC,IAAI,GAAGD,IAAH,aAAGA,IAAH,uBAAGA,IAAI,CAAEE,WAAnB;;AACA,UAAID,IAAJ,EAAU;AACR,YAAI,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEE,MAAN,IAAe,CAAnB,EAAsB;AACpB5B,UAAAA,KAAK,CAACK,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD,SAFD,MAEO;AACLN,UAAAA,KAAK,CAACK,OAAN,CAAcC,IAAd,CAAoB,IAAGoB,IAAI,CAAC,CAAD,CAAI,EAA/B;AACD;AACF,OAND,MAMO;AACL1B,QAAAA,KAAK,CAACK,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACD;AACF,KAdD,CAcE,OAAOa,KAAP,EAAc;AAAA;;AACdU,MAAAA,KAAK,CAAC,wBAAuBV,KAAvB,aAAuBA,KAAvB,sCAAuBA,KAAK,CAAED,IAA9B,gDAAuB,YAAaY,OAApC,CAAD,CAAL;AACD;AACF,GAlBD;;AAoBA,sBACE;AAAK,IAAA,SAAS,EAAEhC,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAG,GAAEA,SAAU,aAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAG,GAAEA,SAAU,uBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,oBAAWF,eAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,CADF,eAIE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAG,GAAEE,SAAU,iBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD,oBAAWD,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADF,CADF,eAIE;AAAK,IAAA,SAAS,EAAG,GAAEC,SAAU,WAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAJF,eAOE;AAAK,IAAA,SAAS,EAAG,GAAEA,SAAU,iBAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AACE,IAAA,IAAI,EAAEG,IADR;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,aAAa,EAAE;AACb8B,MAAAA,QAAQ,EAAE;AADG,KAHjB;AAME,IAAA,QAAQ,EAAEX,QANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE,oBAAC,IAAD,CAAM,IAAN;AACE,IAAA,KAAK,EAAC,OADR;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAE,CACL;AACEY,MAAAA,QAAQ,EAAE,IADZ;AAEEF,MAAAA,OAAO,EAAE;AAFX,KADK,EAKL;AACEP,MAAAA,IAAI,EAAE,OADR;AAEEO,MAAAA,OAAO,EAAE;AAFX,KALK,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAcE,oBAAC,KAAD;AACE,IAAA,WAAW,EAAC,OADd;AAEE,IAAA,SAAS,EAAG,GAAEhC,SAAU,gBAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAdF,CARF,eA4BE,oBAAC,IAAD,CAAM,IAAN;AACE,IAAA,KAAK,EAAC,UADR;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAE,CACL;AACEkC,MAAAA,QAAQ,EAAE,IADZ;AAEEF,MAAAA,OAAO,EAAE;AAFX,KADK,EAKL;AACEP,MAAAA,IAAI,EAAE,QADR;AAEEU,MAAAA,OAAO,EAAE,gDAFX;AAGEH,MAAAA,OAAO,EACL;AAJJ,KALK,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAgBE,oBAAC,KAAD,CAAO,QAAP;AACE,IAAA,WAAW,EAAC,UADd;AAEE,IAAA,SAAS,EAAG,GAAEhC,SAAU,mBAF1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAhBF,CA5BF,eAiDE,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,IAAN;AAAW,IAAA,YAAY,EAAE,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,mBACC,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,QAAQ,EAAC,QAFX;AAGE,IAAA,QAAQ,EACN,CAACG,IAAI,CAACiC,eAAL,CAAqB,IAArB,CAAD,IACAjC,IAAI,CACDkC,cADH,GAEGC,MAFH,CAEU;AAAA,UAAC;AAAEC,QAAAA;AAAF,OAAD;AAAA,aAAgBA,MAAM,CAACT,MAAvB;AAAA,KAFV,EAEyCA,MAP7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,CADF,CAjDF,CADF,CAPF,CAJF,CADF,CADF;AAuFD,CAvID;;AAyIA,eAAetC,UAAU,CAACS,KAAD,CAAzB","sourcesContent":["import { Button, Form, Input, Row } from \"antd\";\nimport Axios from \"axios\";\nimport React, { useEffect } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport AuthStore, { isUserLoggedIn } from \"../../stores/authStore\";\nimport { checkAndReturnAuthObject } from \"../../utilities/validator\";\nimport Card from \"../Card\";\nimport Image from \"../Image\";\nimport { loginBackground, login_logo } from \"./constant\";\nimport \"./Login.scss\";\n\nconst className = \"c-Login\";\n\nconst Login = (props) => {\n  let [form] = Form.useForm();\n\n  useEffect(() => {\n    function handleLoggedInStatusChange(status) {\n      props.history.push(\"/\");\n    }\n    const unsubscribe = AuthStore.subscribe(() => {\n      handleLoggedInStatusChange(isUserLoggedIn(checkAndReturnAuthObject()));\n    });\n    return () => {\n      unsubscribe();\n    };\n  }, [props.history]);\n\n  const loginUser = async (email, password) => {\n    let LoginURL = `${process.env.REACT_APP_BACKEND_URL}/auth/login`;\n    try {\n      let response = await Axios.post(LoginURL, {\n        email: email,\n        password: password,\n      });\n      return response.data;\n    } catch (error) {\n      throw error.response;\n    }\n  };\n\n  const onFinish = async (values) => {\n    try {\n      let response = await loginUser(values.email, values.password);\n      AuthStore.dispatch({ type: \"AUTH/LOG_IN\", payload: response });\n      const user = response?.user;\n      const tabs = user?.tabsVisible;\n      if (tabs) {\n        if (tabs?.length > 1) {\n          props.history.push(\"/\");\n        } else {\n          props.history.push(`/${tabs[0]}`);\n        }\n      } else {\n        props.history.push(\"/\");\n      }\n    } catch (error) {\n      alert(\"Error logging in: \" + error?.data?.message);\n    }\n  };\n\n  return (\n    <div className={className}>\n      <div className={`${className}__container`}>\n        <div className={`${className}__background__wrapper`}>\n          <Image {...loginBackground} />\n        </div>\n        <Card>\n          <div className={`${className}__logo__wrapper`}>\n            <Image {...login_logo} />\n          </div>\n          <div className={`${className}__subtext`}>\n            Join the web3 rocketship\n          </div>\n          <div className={`${className}__form__wrapper`}>\n            <Form\n              form={form}\n              name=\"Login\"\n              initialValues={{\n                remember: true,\n              }}\n              onFinish={onFinish}\n            >\n              <Form.Item\n                label=\"Email\"\n                name=\"email\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Please input your email!\",\n                  },\n                  {\n                    type: \"email\",\n                    message: \"Please enter a valid email\",\n                  },\n                ]}\n              >\n                <Input\n                  placeholder=\"Email\"\n                  className={`${className}__email__input`}\n                />\n              </Form.Item>\n\n              <Form.Item\n                label=\"Password\"\n                name=\"password\"\n                rules={[\n                  {\n                    required: true,\n                    message: \"Please input your password!\",\n                  },\n                  {\n                    type: \"string\",\n                    pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/,\n                    message:\n                      \"Password should be atleast 8 characters with atleast 1 uppercase, 1 lowercase and 1 numeric character\",\n                  },\n                ]}\n              >\n                <Input.Password\n                  placeholder=\"Password\"\n                  className={`${className}__password__input`}\n                />\n              </Form.Item>\n              <Row justify=\"center\">\n                <Form.Item shouldUpdate={true}>\n                  {() => (\n                    <Button\n                      type=\"primary\"\n                      htmlType=\"submit\"\n                      disabled={\n                        !form.isFieldsTouched(true) ||\n                        form\n                          .getFieldsError()\n                          .filter(({ errors }) => errors.length).length\n                      }\n                    >\n                      Log in\n                    </Button>\n                  )}\n                </Form.Item>\n              </Row>\n            </Form>\n          </div>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default withRouter(Login);\n"]},"metadata":{},"sourceType":"module"}